import{k as V,m as se,r as X,j as x}from"./vendor.react-rN-pUNOy.js";import{E as le}from"./vendor.exceljs-DrG8IHxW.js";import{f as re,g as ie}from"./index-I9wQ1uQd.js";import{T as ae,B as ee,k as ne,R as J,a as _,b as F,e as ce,s as B,f as de}from"./vendor.antd-csk3Ol5G.js";import{bA as q,bE as fe,bB as ue}from"./vendor.other-DSSnOnwO.js";import"./vendor.redux-Ck2zd-1P.js";const N=30,te=5,ge="08:30",me="12:00",he="14:00",pe="17:30",xe="12:00",Ce="14:00",ye=60,ve=15,Se=40,O={DEBUG:0,INFO:1,WARNING:2,ERROR:3},be=O.DEBUG;function M(n,t){n>=be&&console.log(`[${Object.keys(O).find(o=>O[o]===n)}] ${t}`)}function Le(n){return n.dailyClasses*n.classDuration*5/N}function oe(n){return n.reduce((t,o)=>t+Le(o),0)}function Ee(n){return n.dailyClasses*n.classDuration/N}function Te(n){const t={};let o=0;return n&&Array.isArray(n)&&n.forEach(e=>{t[e.teacherId]=(t[e.teacherId]||0)+1,o++}),{teacherLessonCount:t,totalLessons:o}}function je(n,t){return t>0?Math.round(n/t):0}function ke(n,t){const o=oe(t),e=n.length,i=[];for(const l of t){const h=Ee(l);for(let p=1;p<=5;p++){const c=n.filter(y=>y.studentId===l.id&&y.day===p).length;c<h&&i.push({studentId:l.id,studentName:l.name,day:p,expectedLessons:h,assignedLessons:c})}}return{totalExpectedLessons:o,totalAssignedLessons:e,assignmentFailures:i}}function Re(n,t){const o=[...t].sort((c,y)=>(n[c.id]||0)-(n[y.id]||0)),e=t.map(c=>n[c.id]||0),i=e.reduce((c,y)=>c+y,0),l=i/e.length,h=Math.max(...e),p=Math.min(...e);return{sortedTeachers:o.map(c=>({id:c.id,name:c.name,workload:n[c.id]||0})),stats:{totalWorkload:i,avgWorkload:Math.round(l*10)/10,maxWorkload:h,minWorkload:p,workloadDifference:h-p}}}function Ae(n,t="id"){const o={};return n.forEach(e=>{o[e[t]]=e}),o}function W(n){const[t,o]=n.split(":").map(Number);return t*60+o}function K(){const n=[];let t=W(ge);const o=W(me);for(;t+N<=o;)n.push({start:t,end:t+N,period:"morning"}),t+=N+te;t=W(he);const e=W(pe);for(;t+N<=e;)n.push({start:t,end:t+N,period:"afternoon"}),t+=N+te;return n}function we(n,t){const o=W(xe),e=W(Ce);return n<o&&n+t>e}function Ie(n){return n>180?[180,n-180]:[n]}function z(n,t,o,e,i,l,h,p,c,y,k){if(h[t]||(h[t]={}),h[t][o]||(h[t][o]={}),k[t]||(k[t]={}),k[t][n.id]||(k[t][n.id]=[]),k[t][n.id].includes(o-1))return!1;const T=y[t],C=T?T.name:`未知老师${t}`,E=p[t]||0,s=Math.ceil(i/N);if(E>=Se&&M(O.WARNING,`⚠️ 老师${C}当前工作量较高: ${E}课时`),E+s>ye)return M(O.DEBUG,`❌ 老师${C}已达最大课时限制，无法分配课程`),!1;const r=c.filter(S=>S.period===e),d=Math.ceil(i/N);if(r.length<d)return M(O.DEBUG,`  ❌ 没有足够的连续${e}时段`),!1;for(let S=0;S<=r.length-d;S++){let a=!0;for(let g=0;g<d;g++){const f=r[S+g];if(h[t][o][f.start]){a=!1;break}}const u=r[S];if(i<=180&&we(u.start,i)){a=!1;continue}if(a){for(let g=0;g<d;g++){const f=r[S+g];l.push({studentId:n.id,teacherId:t,day:o,start:f.start,end:f.end,period:e,duration:N}),h[t][o][f.start]=!0}return p[t]=(p[t]||0)+d,k[t][n.id].push(o),!0}}return!1}function De(n,t){const o=K(),e=[],i={},l={},h={},p=Ae(t),c={},y=[];M(O.INFO,`一周排课开始，学生总数: ${n.length}`);const k={};t.forEach(s=>{k[s.id]=0});const v=(s,r,d)=>[...s].sort((S,a)=>{const u=r[S.id]||0,g=r[a.id]||0,f=d[S.id]||0,w=d[a.id]||0;return u!==g?u-g:f!==w?f-w:Math.random()-.5});for(const s of n){const r=v(t,l,k);let d=null,S=null;for(let a=0;a<r.length;a++){for(let u=a+1;u<r.length;u++){const g=l[r[a].id]||0,f=l[r[u].id]||0;if(!(Math.abs(g-f)>ve)){d=r[a].id,S=r[u].id;break}}if(d&&S)break}if(!d||!S)for(let a=0;a<r.length;a++){for(let u=a+1;u<r.length;u++){d=r[a].id,S=r[u].id;break}if(d&&S)break}h[s.id]={teacherA:d,teacherB:S},k[d]++,k[S]++,M(O.DEBUG,`学生 ${s.name} 分配老师: ${p[d]?.name} 和 ${p[S]?.name}`)}const T=[...n].sort((s,r)=>r.classDuration-s.classDuration);function C(s,r,d,S,a,u,g,f,w,b,R){if(u.filter(j=>j.studentId===s.id&&j.day===d).length>0)return!1;if(s.classDuration===240){const j=Math.random()>.5,m=j?180:60,L=j?60:180;return z(s,r,d,"morning",m,u,g,f,w,b,R)?z(s,r,d,"afternoon",L,u,g,f,w,b,R)?!0:(u.filter($=>$.studentId===s.id&&$.day===d&&$.period==="morning").forEach($=>{const Y=u.indexOf($);Y>-1&&u.splice(Y,1),g[r][d][$.start]=!1,f[r]-=1;const Z=R[r][s.id].indexOf(d);Z>-1&&R[r][s.id].splice(Z,1)}),!1):!1}let A=!0;for(const j of a)if(!z(s,r,d,S,j,u,g,f,w,b,R)){A=!1;break}return A}const E=(s,r,d,S,a)=>{for(const u of r){i[u]||(i[u]={}),i[u][d]||(i[u][d]={});for(const g of S)if(C(s,u,d,g,a,e,i,l,o,p,c))return!0}return!1};for(const s of T){const{teacherA:r,teacherB:d}=h[s.id],S=Ie(s.classDuration);for(let a=1;a<=5;a++){const u=[1,3,5].includes(a)?r:d,g=u===r?d:r;if(i[u]||(i[u]={}),i[u][a]||(i[u][a]={}),i[g]||(i[g]={}),i[g][a]||(i[g][a]={}),s.dailyClasses===1){let b=!1;if(e.filter(A=>A.studentId===s.id&&A.day===a).length>0)continue;const D=Math.random()>.5?["morning","afternoon"]:["afternoon","morning"];if(b=E(s,[u],a,D,S),b||(b=E(s,[g],a,D,S)),!b){const A=[...t].filter(j=>j.id!==u&&j.id!==g).sort((j,m)=>(l[j.id]||0)-(l[m.id]||0));b=E(s,A,a,D,S)}}else{let b=!1,R=!1;if(e.filter(j=>j.studentId===s.id&&j.day===a).length>=s.dailyClasses*S.length)continue;let A=!0;for(const j of S){if(!b){if(!z(s,u,a,"morning",j,e,i,l,o,p,c)){A=!1;break}b=!0}if(!R){if(!z(s,u,a,"afternoon",j,e,i,l,o,p,c)){A=!1;break}R=!0}}if(!A){b&&(e.filter(m=>m.studentId===s.id&&m.teacherId===u&&m.day===a&&m.period==="morning").forEach(m=>{const L=e.indexOf(m);L>-1&&e.splice(L,1),l[u]--,delete i[u][a][m.period]}),b=!1),R&&(e.filter(m=>m.studentId===s.id&&m.teacherId===u&&m.day===a&&m.period==="afternoon").forEach(m=>{const L=e.indexOf(m);L>-1&&e.splice(L,1),l[u]--,delete i[u][a][m.period]}),R=!1),A=!0;for(const j of S){if(!b){if(!z(s,g,a,"morning",j,e,i,l,o,p,c)){A=!1;break}b=!0}if(!R){if(!z(s,g,a,"afternoon",j,e,i,l,o,p,c)){A=!1;break}R=!0}}if(!A){b&&(e.filter(L=>L.studentId===s.id&&L.teacherId===g&&L.day===a&&L.period==="morning").forEach(L=>{const I=e.indexOf(L);I>-1&&e.splice(I,1),l[g]--,delete i[g][a][L.period]}),b=!1),R&&(e.filter(L=>L.studentId===s.id&&L.teacherId===g&&L.day===a&&L.period==="afternoon").forEach(L=>{const I=e.indexOf(L);I>-1&&e.splice(I,1),l[g]--,delete i[g][a][L.period]}),R=!1);const j=[...t].filter(m=>m.id!==u&&m.id!==g).sort((m,L)=>(l[m.id]||0)-(l[L.id]||0));for(const m of j){i[m.id]||(i[m.id]={}),i[m.id][a]||(i[m.id][a]={}),A=!0;for(const L of S){if(!b){if(!z(s,m.id,a,"morning",L,e,i,l,o,p,c)){A=!1;break}b=!0}if(!R){if(!z(s,m.id,a,"afternoon",L,e,i,l,o,p,c)){A=!1;break}R=!0}}if(A){m.id;break}else b&&(e.filter(I=>I.studentId===s.id&&I.teacherId===m.id&&I.day===a&&I.period==="morning").forEach(I=>{const $=e.indexOf(I);$>-1&&e.splice($,1),l[m.id]--,delete i[m.id][a][I.period]}),b=!1),R&&(e.filter(I=>I.studentId===s.id&&I.teacherId===m.id&&I.day===a&&I.period==="afternoon").forEach(I=>{const $=e.indexOf(I);$>-1&&e.splice($,1),l[m.id]--,delete i[m.id][a][I.period]}),R=!1)}}}}const f=s.dailyClasses,w=e.filter(b=>b.studentId===s.id&&b.day===a).length/S.length;w<f&&(y.push({studentId:s.id,studentName:s.name,day:a,teacherId:u,expectedLessons:f,actualLessons:w,weekType:"week"}),M(O.ERROR,`${s.name} 星期${a} 排课失败: 期望${f}课时，实际${w}课时`))}}return M(O.INFO,`一周排课结束，已排课时: ${e.length}`),M(O.INFO,`老师工作量统计: ${t.map(s=>`${s.name}: ${l[s.id]||0}课时`).join(", ")}`),{schedule:e,teacherWork:l,studentTeacherAssignments:h,failedAssignments:y}}function P(n,t){console.log("开始生成一周课表..."),console.log(`学生数量: ${n.length}, 老师数量: ${t.length}`);const{schedule:o,teacherWork:e,studentTeacherAssignments:i,failedAssignments:l}=De(n,t),h=ke(o,n),p=new Set;l.forEach(v=>{p.add(v.studentId)});const c=Array.from(p).map(v=>{const T=n.find(E=>E.id===v),C=l.filter(E=>E.studentId===v);return{studentId:v,studentName:T.name,dailyClasses:T.dailyClasses,classDuration:T.classDuration,totalFailures:C.length}}),y={schedule:o,assignmentStats:h,teacherWorkloads:e,failedStudents:c,studentTeacherAssignments:i};console.log("排课完成！"),console.log(`一周总期望课时: ${h.totalExpectedLessons}`),console.log(`一周总已分配课时: ${h.totalAssignedLessons}`),console.log(`排课失败学生数量: ${c.length}`);const k=Re(e,t);return console.log("老师工作量统计（一周总计）:"),k.sortedTeachers.forEach(v=>{console.log(`  - ${v.name}: ${v.workload}课时`)}),c.length>0&&(console.log("排课失败学生列表:"),c.forEach(v=>{console.log(`  - ${v.studentName}: 每天${v.dailyClasses}节课, 每节课${v.classDuration}分钟, 失败天数: ${v.totalFailures}`)})),y}function G(n){const t=Math.floor(n/60),o=n%60;return`${t.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`}async function $e(n,t){const o=new le.Workbook;return o.creator="排课系统",o.lastModifiedBy="排课系统",o.created=new Date,o.modified=new Date,Oe(o,n,t),ze(o,n,t),Me(o,n,t),await o.xlsx.writeBuffer()}async function Ne(n,t,o="课程表.xlsx"){try{const e=await $e(n,t),i=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=URL.createObjectURL(i),h=document.createElement("a");return h.href=l,h.download=o,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(l),!0}catch(e){return console.error("下载Excel文件失败:",e),!1}}function Oe(n,t,o){const e=n.addWorksheet("课程表"),{schedule:i}=P(t,o),l=K(),h=["1","2","3","4","5"],p=["周一","周二","周三","周四","周五"];let c=1;e.getCell(1,1).value="老师",e.getCell(1,1).font={bold:!0},e.getCell(1,1).alignment={vertical:"middle",horizontal:"center"},e.getCell(1,2).value="星期",e.getCell(1,2).font={bold:!0},e.getCell(1,2).alignment={vertical:"middle",horizontal:"center"},c=3,l.forEach((k,v)=>{const T=G(k.start),C=G(k.end),E=`${T} - ${C}`;e.getCell(1,c).value=E,e.getCell(1,c).font={bold:!0},e.getCell(1,c).alignment={vertical:"middle",horizontal:"center"},e.getColumn(c).width=12,c++}),e.getColumn(1).width=12,e.getColumn(2).width=8;let y=2;o.forEach((k,v)=>{const T=h.length;T>1&&e.mergeCells(y,1,y+T-1,1),h.forEach((C,E)=>{e.getCell(y,1).value=k.name,e.getCell(y,1).alignment={vertical:"middle",horizontal:"center"},e.getCell(y,2).value=p[E],e.getCell(y,2).alignment={vertical:"middle",horizontal:"center"};let s=null,r=3,d=null;l.forEach((S,a)=>{const u=i.find(g=>g.teacherId===k.id&&g.day===Number(C)&&g.start===S.start&&g.end===S.end);if(!u)d!==null&&r-1>d&&e.mergeCells(y,d,y,r-1),d=null,s=null,e.getCell(y,r).value="";else{const g=t.find(f=>f.id===u.studentId);g?g.id===s?(d===null&&(d=r-1),e.getCell(y,r).value=""):(d!==null&&r-1>d&&e.mergeCells(y,d,y,r-1),e.getCell(y,r).value=g.name,e.getCell(y,r).alignment={vertical:"middle",horizontal:"center"},s=g.id,d=null):(e.getCell(y,r).value="",s=null,d=null)}r++}),d!==null&&r-1>d&&e.mergeCells(y,d,y,r-1),y++})}),H(e,1,1,y-1,l.length+2)}function ze(n,t,o){const e=n.addWorksheet("学生排课明细"),{schedule:i}=P(t,o);e.getCell(1,1).value="学生姓名",e.getCell(1,2).value="老师姓名",e.getCell(1,3).value="星期",e.getCell(1,4).value="时段",e.getCell(1,5).value="开始时间",e.getCell(1,6).value="结束时间";for(let h=1;h<=6;h++)e.getCell(1,h).font={bold:!0},e.getCell(1,h).alignment={vertical:"middle",horizontal:"center"},e.getCell(1,h).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFD9D9D9"}};e.getColumn(1).width=15,e.getColumn(2).width=15,e.getColumn(3).width=8,e.getColumn(4).width=8,e.getColumn(5).width=12,e.getColumn(6).width=12;let l=2;t.forEach(h=>{const p=i.filter(c=>c.studentId===h.id);if(p.length===0){e.getCell(l,1).value=h.name,e.getCell(l,2).value="无排课";for(let c=1;c<=6;c++)e.getCell(l,c).alignment={vertical:"middle",horizontal:"center"};l++}else{p.sort((v,T)=>v.day!==T.day?v.day-T.day:v.period!==T.period?v.period==="morning"?-1:1:v.start-T.start);let c=l,y=p[0].teacherId,k=p[0].day;p.forEach((v,T)=>{const C=o.find(r=>r.id===v.teacherId);e.getCell(l,1).value=h.name,e.getCell(l,2).value=C?C.name:"未知老师",e.getCell(l,3).value=`星期${v.day}`,e.getCell(l,4).value=v.period==="morning"?"上午":"下午",e.getCell(l,5).value=G(v.start),e.getCell(l,6).value=G(v.end);for(let r=1;r<=6;r++)e.getCell(l,r).alignment={vertical:"middle",horizontal:"center"};const E=T===p.length-1,s=!E&&(p[T+1].teacherId!==y||p[T+1].day!==k);(E||s)&&(l>c&&(e.mergeCells(c,1,l,1),e.mergeCells(c,2,l,2)),E||(c=l+1,y=p[T+1].teacherId,k=p[T+1].day)),l++})}l++}),H(e,1,1,l-1,6)}function Me(n,t,o){const e=n.addWorksheet("排课统计"),{schedule:i,assignmentStats:l}=P(t,o),h=K(),p=o.length*h.length*5,c={};i.forEach(E=>{c[E.teacherId]=(c[E.teacherId]||0)+1});const y=o.length,k=l?.totalAssignedLessons||Object.values(c).reduce((E,s)=>E+s,0),v=y>0?Math.round(k/y):0,T=l?.totalExpectedLessons||t.reduce((E,s)=>E+Math.ceil(s.dailyClasses*s.classDuration*5/N),0);e.mergeCells(1,1,1,3),e.getCell(1,1).value="排课统计信息",e.getCell(1,1).font={bold:!0,size:16},e.getCell(1,1).alignment={vertical:"middle",horizontal:"center"};let C=3;e.getCell(C,1).value="老师可安排总课时",e.getCell(C,2).value=p,e.getCell(C,3).value="课时",C++,e.getCell(C,1).value="学生需求总课时",e.getCell(C,2).value=T,e.getCell(C,3).value="课时",C++,e.getCell(C,1).value="已分配总课时",e.getCell(C,2).value=k,e.getCell(C,3).value="课时",C++,e.getCell(C,1).value="平均课时",e.getCell(C,2).value=v,e.getCell(C,3).value="课时/老师",C++,C++,e.getCell(C,1).value="老师",e.getCell(C,2).value="已分配课时",e.getCell(C,3).value="状态",C++,o.forEach(E=>{const s=c[E.id]||0;let r="正常";s===0?r="无排课":s<v*.5?r="课时较少":s>v*1.5&&(r="课时较多"),e.getCell(C,1).value=E.name,e.getCell(C,2).value=s,e.getCell(C,3).value=r;for(let d=1;d<=3;d++)e.getCell(C,d).alignment={vertical:"middle",horizontal:"center"};C++}),e.getColumn(1).width=15,e.getColumn(2).width=12,e.getColumn(3).width=12,H(e,3,1,C-1,3),H(e,1,1,1,3)}function H(n,t,o,e,i){const l={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}};for(let h=t;h<=e;h++)for(let p=o;p<=i;p++)n.getCell(h,p).border=l}const{TabPane:Q}=ne,{Title:Be}=ae,{confirm:We}=de;function U(n){const t=Math.floor(n/60),o=n%60;return`${t.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`}function Pe(){const n=V(f=>f.students.list),t=V(f=>f.teachers.list),o=V(f=>f.schedule.list[0]),e=se(),[i,l]=X.useState([]),[h,p]=X.useState(null),c=()=>{const f=P(n,t);l(f.schedule),p(f.assignmentStats);const w={schedule:f.schedule,assignmentStats:f.assignmentStats,timestamp:new Date().toISOString()};e(o?re({id:o.id,...w}):ie(w)),console.log("排课统计更新:",f.assignmentStats)},y=async()=>{B.loading("正在生成Excel文件...",0);try{await Ne(n,t)?(B.destroy(),B.success("Excel文件导出成功！")):(B.destroy(),B.error("Excel文件导出失败，请重试。"))}catch(f){B.destroy(),console.error("导出Excel时出错:",f),B.error("导出Excel文件时发生错误："+f.message)}},k=()=>{We({title:"确认重新排课",content:"重新排课将生成新的课表，当前课表将被替换。确定要继续吗？",okText:"确定",okType:"primary",cancelText:"取消",onOk(){c(),console.log("重新排课已执行")},onCancel(){console.log("取消重新排课")}})};X.useEffect(()=>{o&&o.schedule?(l(o.schedule),p(o.assignmentStats),console.log("已加载保存的排课结果")):c()},[n,t,o]);const v=K(),T=t.length*v.length*5,C=h?.totalExpectedLessons||oe(n),{teacherLessonCount:E,totalLessons:s}=Te(i),r=t.length,d=je(s,r);console.log("课时统计信息:"),console.log("  - 学生期望总课时:",C),console.log("  - 老师已分配课时:",s),console.log("  - 课时差:",C-s);const S=["1","2","3","4","5"],a=["周一","周二","周三","周四","周五"],u=[{title:"老师",dataIndex:"teacher",key:"teacher",fixed:"left",width:120},{title:"星期",dataIndex:"day",key:"day",fixed:"left",width:80},...v.map((f,w)=>({title:(()=>{const b=U(f.start),R=U(f.end);return`${b} - ${R}`})(),dataIndex:`slot${w}`,key:`slot${w}`,align:"center",width:120}))],g=[];return t.forEach(f=>{S.forEach((w,b)=>{const R={key:`${f.id}_${w}`,teacher:f.name,day:a[b]};v.forEach((D,A)=>{R[`slot${A}`]="";const j=i&&Array.isArray(i)?i.find(m=>m.teacherId===f.id&&m.day===Number(w)&&m.start===D.start&&m.end===D.end):null;if(j){const m=n.find(L=>L.id===j.studentId);m&&(R[`slot${A}`]=m.name)}}),g.push(R)})}),x.jsxs("div",{children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[x.jsx(Be,{level:2,children:"课程排期"}),x.jsxs("div",{style:{display:"flex",gap:"12px"},children:[x.jsx(ee,{onClick:y,type:"primary",style:{backgroundColor:"#52c41a"},children:"导出Excel"}),x.jsx(ee,{type:"primary",onClick:k,style:{backgroundColor:"#1890ff"},children:"重新排课"})]})]}),x.jsxs(ne,{defaultActiveKey:"1",style:{marginBottom:24},children:[x.jsxs(Q,{tab:"排课统计信息",children:[x.jsxs(J,{gutter:16,style:{marginBottom:24},children:[t.map(f=>x.jsx(_,{span:4,children:x.jsxs(F,{variant:"outlined",style:{textAlign:"center",marginBottom:8,background:"#fffbe6",borderColor:"#faad14"},bodyStyle:{padding:12},children:[x.jsxs("div",{style:{fontSize:16,color:"#888",display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[x.jsx(q,{style:{color:"#faad14"}}),f.name," 课时统计"]}),x.jsxs("div",{style:{fontSize:24,fontWeight:"bold",color:"#faad14",marginTop:8},children:[E[f.id]||0," 课时"]})]})},f.id)),x.jsx(_,{span:4,children:x.jsxs(F,{variant:"outlined",style:{textAlign:"center",marginBottom:8,background:"#e6fffb",borderColor:"#13c2c2"},bodyStyle:{padding:12},children:[x.jsxs("div",{style:{fontSize:16,color:"#888",display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[x.jsx(fe,{style:{color:"#13c2c2"}}),"平均课时"]}),x.jsx("div",{style:{fontSize:32,fontWeight:"bold",color:"#13c2c2",marginTop:4},children:d})]})})]}),x.jsxs(J,{gutter:32,children:[x.jsx(_,{span:12,children:x.jsxs(F,{variant:"outlined",style:{textAlign:"center",background:"#f0f5ff",borderColor:"#2f54eb"},children:[x.jsxs("div",{style:{fontSize:16,color:"#888",display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[x.jsx(ue,{style:{color:"#2f54eb"}}),"老师可安排总课时"]}),x.jsxs("div",{style:{fontSize:32,fontWeight:"bold",color:"#2f54eb",marginTop:4},children:[T," 课时"]})]})}),x.jsx(_,{span:12,children:x.jsxs(F,{variant:"outlined",style:{textAlign:"center",background:"#f6ffed",borderColor:"#52c41a"},children:[x.jsxs("div",{style:{fontSize:16,color:"#888",display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[x.jsx(q,{style:{color:"#52c41a"}}),"学生需求总课时"]}),x.jsxs("div",{style:{fontSize:32,fontWeight:"bold",color:"#52c41a",marginTop:4},children:[C," 课时"]})]})})]})]},"1"),x.jsx(Q,{tab:"课表",children:t.length===0?x.jsx("div",{style:{color:"#888",marginTop:32,fontSize:18},children:"当前没有老师，无法排课，请先添加老师。"}):x.jsx(ce,{columns:u,bordered:!0,dataSource:g,pagination:!1,scroll:{x:!0},rowKey:"key"})},"2"),x.jsx(Q,{tab:"学生课表",children:t.length===0?x.jsx("div",{style:{color:"#888",marginTop:32,fontSize:18},children:"当前没有老师，无法排课，请先添加老师。"}):x.jsx(J,{gutter:[16,16],children:n.map(f=>{const w=i&&Array.isArray(i)?i.filter(b=>b.studentId===f.id):[];return x.jsx(_,{span:8,children:x.jsx(F,{size:"small",style:{marginBottom:8,background:"#f0f5ff",borderColor:"#adc6ff"},bodyStyle:{padding:12},title:x.jsxs("div",{children:[x.jsx(q,{style:{marginRight:8}}),f.name]}),children:w.length===0?x.jsx("div",{style:{color:"#bbb"},children:"无排课"}):w.map((b,R)=>{const D=t.find(A=>A.id===b.teacherId);return x.jsxs("div",{style:{marginBottom:8},children:[x.jsx("span",{style:{color:"#888"},children:"老师："}),x.jsx("span",{children:D?D.name:"未知老师"}),x.jsx("span",{style:{marginLeft:8,color:"#888"},children:"时间："}),x.jsxs("span",{children:["星期",b.day," ",b.period==="morning"?"上午":"下午"," ",U(b.start)," - "," ",U(b.end)]})]},R)})})},f.id)})})},"3")]})]})}export{Pe as default};
